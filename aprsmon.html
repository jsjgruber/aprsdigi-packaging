<HTML>
<BODY>
<PRE>
<HTML>
<BODY>
<PRE>
       aprsmon - monitor APRS AX.25 traffic for javAPRS


</PRE>
<H2>SYNOPSIS</H2><PRE>
       <STRONG>aprsmon</STRONG>  <STRONG>[-a]</STRONG>  <STRONG>[-m]</STRONG> <STRONG>[-r]</STRONG> <STRONG>[-k</STRONG> <STRONG>minutes]</STRONG> <STRONG>[-p</STRONG> <STRONG>port]</STRONG> <STRONG>[-t</STRONG> <STRONG>title]</STRONG>
       <STRONG>[-i</STRONG> <STRONG>infofile]</STRONG>


</PRE>
<H2>DESCRIPTION</H2><PRE>
       <STRONG>Aprsmon</STRONG> uses SOCK_PACKET facilities to provide  a  network
       monitor  of all AX.25 UI text traffic heard by the system.
       It is based on listen(1).

       <STRONG>Aprsmon</STRONG> collects (-m) or displays standard AX.25  UI  text
       frames  in  a  format similar to that output by a standard
       TNC in "Monitor ON" mode and is intended to be  used  with
       programs  like javAPRS which wish to see a TNC data stream
       over a TCP connection.  When the <STRONG>aprsmon</STRONG> master  has  been
       running  for  a  while  and a new <STRONG>aprsmon</STRONG> slave starts up,
       first all saved up reports are sent,  then  a  title  line
       indicating  the  beginning  of  live data is sent, and new
       reports are sent as received.

       Compressed position and telemetry reports as generated  by
       the  APRS Mic Encoder are translated into the conventional
       uncompressed APRS  Micro-Interface-Module  (MIM)  telemtry
       format  so  that  these  stations  are visible in javAPRS.
       Reports containing a TheNet X1J4 beacon  header  are  also
       edited  to strip off the header making these nodes visible
       in javAPRS as well.



</PRE>
<H2>OPTIONS</H2><PRE>
       <STRONG>-a</STRONG>        Allow for the monitoring of outgoing  frames  as
                 well as incoming ones.

       <STRONG>-r</STRONG>        Choose  "raw"  mode  which  allows non-printable
                 data through.

       <STRONG>-p</STRONG> <STRONG>port</STRONG>   Monitor only those frames received on a particu-
                 lar  port,  by  default all AX.25 interfaces are
                 monitored.

       <STRONG>-m</STRONG>        "Master" mode.  Retain monitored  data  for  the
                 number  of  minutes specified with the <STRONG>-k</STRONG> option
                 in a shared memory segment.

       <STRONG>-k</STRONG> <STRONG>minutes</STRONG>
                 Retain monitored packets going  back  the  given
                 number of minutes.  Default is 30.

       <STRONG>-t</STRONG> <STRONG>title</STRONG>  Sets the <EM>javAPRS</EM> title string.  Default is "Live
                 data from Linux."

                 <EM>Infofile</EM> is  the  path  to  the  file  that  the
                 aprsmon  master writes the shared memory segment
                 and   semaphore   id's   into.     Default    is
                 "/var/ax25/aprsmon.info."


</PRE>
<H2>javAPRS CONFIGURATION</H2><PRE>
       Set  up  one <EM>aprsmon</EM> master running on your system to col-
       lect historical data going back a while.  You will  proba-
       bly want to set up an /etc/rc.d/init.d script for this.

       aprsmon -a -m&amp;

       Add  an  entry into /etc/services with the port number you
       want javAPRS to connect on.  For example:

       aprs      14439/tcp # APRS monitor on 144.39

       Add an entry into /etc/inetd.conf for this service:

       aprs stream tcp nowait root /usr/sbin/aprsmon aprsmon -a

       To test, simply "telnet  localhost  aprs".   To  use  with
       javAPRS, set, for example,

       &lt;PARAM name = "dataFile1" value = "netc:14439:localhost"&gt;
       in  your  HTML file as described in the <STRONG>javAPRS</STRONG> documenta-
       tion, and then use <STRONG>appletviewer</STRONG> to run javAPRS:
       appletviewer mydemo.html



</PRE>
<H2>Mic-E to MIM Translation</H2><PRE>
       The Mic-E reduces the duration of packet noise on a  voice
       frequency  by encoding its data in a compressed form, some
       of which is binary.  Some APRS-decoding software,  notably
       javAPRS,  is unable to deal with this data.  To solve this
       problem <STRONG>aprsmon</STRONG> expands the Mic-E packet into one  or  two
       MIM packets as follows:

       @<STRONG>ddhhmm</STRONG>z<STRONG>DDMM.hhN/DDDMM.hhW$cse/spd/E</STRONG>&gt;mon/M<STRONG>m</STRONG>/<STRONG>status</STRONG>
       T#MIC,<STRONG>aaabbbcccdddeeefffComments</STRONG>


       <STRONG>ddhhmm</STRONG>    is  the UTC day and time the packet was received
                 by the host running <STRONG>aprsmon.</STRONG>

       <STRONG>DDMM.hhN</STRONG>  is the latitude.

       <STRONG>/</STRONG>         is the symbol table selection (/ or \).

       <STRONG>DDDMM.hhW</STRONG> is the longitude.

       <STRONG>$</STRONG>         is the symbol.

       <STRONG>E</STRONG>         is the type of Mic-Encoder:

                 E - TAPR Mic-Encoder
                 T - Kenwood TH-D7

       <STRONG>m</STRONG>         is the status message number, and

       <STRONG>status</STRONG>    is the status message number  expanded  as  fol-
                 lows:

                 0 -  Off duty..
                 1 -  Enroute...
                 2 -  In Service
                 3 -  Returning.
                 4 -  Committed.
                 5 -  Special...
                 6 -  PRIORITY..
                 7 -  EMERGENCY.

       <STRONG>aaa,bbb,ccc,ddd,eee,fff</STRONG>
                 are the values of the telemetry channels.


</PRE>
<H2>FILES</H2><PRE>
       <STRONG>/etc/ax25/axports</STRONG> <STRONG>/var/ax25/aprsmon.info</STRONG>


</PRE>
<H2>SEE ALSO</H2><PRE>
       <STRONG>call</STRONG>(1),   <STRONG>listen</STRONG>(1),   <STRONG>beacon</STRONG>(1),  <STRONG>ax25</STRONG>(4),  <STRONG>axattach</STRONG>(8),
       <STRONG>http://www.bridge.net/~sdimse/javAPRS.html,</STRONG>
       <STRONG>http://www.tapr.org,</STRONG>       <STRONG>http://www.aprs.net,</STRONG>       <STRONG>MIC-</STRONG>
       <STRONG>E.TXT,</STRONG>TELEMTRY.TXT,<STRONG>PROTOCOL.TXT</STRONG>


</PRE>
<H2>AUTHOR</H2><PRE>
       Alan Crosswell, n2ygk@weca.org


















</PRE>
</BODY>
</HTML>
</PRE>
</BODY>
</HTML>
